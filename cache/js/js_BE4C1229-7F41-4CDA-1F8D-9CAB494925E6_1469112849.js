
(function(angular,undefined){'use strict';var DEFAULT_MENU=[['bold','italic','underline','strikethrough','subscript','superscript'],['format-block'],['font'],['font-size'],['font-color','hilite-color'],['remove-format'],['ordered-list','unordered-list','outdent','indent'],['left-justify','center-justify','right-justify'],['code','quote','paragraph'],['link','image'],['htmlcode','shorttext']];var app=angular.module('XSCMS_ADMIN_DASHBOARD');app.run(function($templateCache){$templateCache.put('/pfq-wysiwyg/image-modal.html','<div class="modal" tabindex="-1" role="dialog" aria-hidden="true">'+'<div class="modal-dialog">'+' <div class="modal-content">'+'<div class="modal-header" ng-show="title">'+'<button type="button" class="close" aria-label="Close" ng-click="$hide()"><span aria-hidden="true">&times;</span></button>'+'<h4 class="modal-title" ng-bind="title"></h4>'+'</div>'+'<div class="modal-body" ng-bind="content"></div>'+'<div class="modal-footer">'+'<button type="button" class="btn btn-default" ng-click="$hide()">Close</button>'+'</div>'+'</div>'+'</div>'+'</div>');});app.factory('Helper',function(){'use strict';return{closestSlider:function(elem){var matchesSelector=elem.matches||elem.webkitMatchesSelector||elem.mozMatchesSelector||elem.msMatchesSelector;if(matchesSelector.bind(elem)('I')){return elem.parentNode;}
return elem;},getOffset:function(elem,fixedPosition){var
x=0,y=0,scrollX=0,scrollY=0;while(elem&&!isNaN(elem.offsetLeft)&&!isNaN(elem.offsetTop)){x+=elem.offsetLeft;y+=elem.offsetTop;if(!fixedPosition&&elem.tagName==='BODY'){scrollX+=document.documentElement.scrollLeft||elem.scrollLeft;scrollY+=document.documentElement.scrollTop||elem.scrollTop;}else{scrollX+=elem.scrollLeft;scrollY+=elem.scrollTop;}
elem=elem.offsetParent;}
return{top:y,left:x,scrollX:scrollX,scrollY:scrollY};},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]];}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[2.55*execResult[1],2.55*execResult[2],2.55*execResult[3],execResult[4]];}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)];}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)];}}]};});app.factory('Color',['Helper',function(Helper){'use strict';return{value:{h:1,s:1,b:1,a:1},'rgb':function(){var rgb=this.toRGB();return'rgb('+rgb.r+','+rgb.g+','+rgb.b+')';},'rgba':function(){var rgb=this.toRGB();return'rgba('+rgb.r+','+rgb.g+','+rgb.b+','+rgb.a+')';},'hex':function(){return this.toHex();},RGBtoHSB:function(r,g,b,a){r/=255;g/=255;b/=255;var H,S,V,C;V=Math.max(r,g,b);C=V-Math.min(r,g,b);H=(C===0?null:V===r?(g-b)/C:V===g?(b-r)/C+2:(r-g)/C+4);H=((H+360)%6)*60/360;S=C===0?0:C/V;return{h:H||1,s:S,b:V,a:a||1};},setColor:function(val){val=val.toLowerCase();for(var key in Helper.stringParsers){if(Helper.stringParsers.hasOwnProperty(key)){var parser=Helper.stringParsers[key];var match=parser.re.exec(val),values=match&&parser.parse(match);if(values){this.value=this.RGBtoHSB.apply(null,values);return false;}}}},setHue:function(h){this.value.h=1-h;},setSaturation:function(s){this.value.s=s;},setLightness:function(b){this.value.b=1-b;},setAlpha:function(a){this.value.a=parseInt((1-a)*100,10)/100;},toRGB:function(h,s,b,a){if(!h){h=this.value.h;s=this.value.s;b=this.value.b;}
h*=360;var R,G,B,X,C;h=(h%360)/60;C=b*s;X=C*(1-Math.abs(h%2-1));R=G=B=b-C;h=~~h;R+=[C,X,0,0,X,C][h];G+=[X,C,C,X,0,0][h];B+=[0,0,X,C,C,X][h];return{r:Math.round(R*255),g:Math.round(G*255),b:Math.round(B*255),a:a||this.value.a};},toHex:function(h,s,b,a){var rgb=this.toRGB(h,s,b,a);return'#'+((1<<24)|(parseInt(rgb.r,10)<<16)|(parseInt(rgb.g,10)<<8)|parseInt(rgb.b,10)).toString(16).substr(1);}};}]);app.factory('Slider',['Helper',function(Helper){'use strict';var
slider={maxLeft:0,maxTop:0,callLeft:null,callTop:null,knob:{top:0,left:0}},pointer={};return{getSlider:function(){return slider;},getLeftPosition:function(event){return Math.max(0,Math.min(slider.maxLeft,slider.left+((event.pageX||pointer.left)-pointer.left)));},getTopPosition:function(event){return Math.max(0,Math.min(slider.maxTop,slider.top+((event.pageY||pointer.top)-pointer.top)));},setSlider:function(event,fixedPosition){var
target=Helper.closestSlider(event.target),targetOffset=Helper.getOffset(target,fixedPosition),rect=target.getBoundingClientRect(),offsetX=event.clientX-rect.left,offsetY=event.clientY-rect.top;slider.knob=target.children[0].style;slider.left=event.pageX-targetOffset.left-window.pageXOffset+targetOffset.scrollX;slider.top=event.pageY-targetOffset.top-window.pageYOffset+targetOffset.scrollY;pointer={left:event.pageX-(offsetX-slider.left),top:event.pageY-(offsetY-slider.top)};},setSaturation:function(event,fixedPosition){slider={maxLeft:100,maxTop:100,callLeft:'setSaturation',callTop:'setLightness'};this.setSlider(event,fixedPosition);},setHue:function(event,fixedPosition){slider={maxLeft:0,maxTop:100,callLeft:false,callTop:'setHue'};this.setSlider(event,fixedPosition);},setAlpha:function(event,fixedPosition){slider={maxLeft:0,maxTop:100,callLeft:false,callTop:'setAlpha'};this.setSlider(event,fixedPosition);},setKnob:function(top,left){slider.knob.top=top+'px';slider.knob.left=left+'px';}};}]);app.directive('colorpicker',['$document','$compile','Color','Slider','Helper',function($document,$compile,Color,Slider,Helper){'use strict';return{require:'?ngModel',restrict:'A',link:function($scope,elem,attrs,ngModel){var
thisFormat=attrs.colorpicker?attrs.colorpicker:'hex',position=angular.isDefined(attrs.colorpickerPosition)?attrs.colorpickerPosition:'bottom',inline=angular.isDefined(attrs.colorpickerInline)?attrs.colorpickerInline:false,fixedPosition=angular.isDefined(attrs.colorpickerFixedPosition)?attrs.colorpickerFixedPosition:false,target=angular.isDefined(attrs.colorpickerParent)?elem.parent():angular.element(document.body),withInput=angular.isDefined(attrs.colorpickerWithInput)?attrs.colorpickerWithInput:false,inputTemplate=withInput?'<input type="text" name="colorpicker-input">':'',closeButton=!inline?'<button type="button" class="close close-colorpicker">&times;</button>':'',template='<div class="colorpicker dropdown">'+'<div class="dropdown-menu">'+'<colorpicker-saturation><i></i></colorpicker-saturation>'+'<colorpicker-hue><i></i></colorpicker-hue>'+'<colorpicker-alpha><i></i></colorpicker-alpha>'+'<colorpicker-preview></colorpicker-preview>'+
inputTemplate+
closeButton+'</div>'+'</div>',colorpickerTemplate=angular.element(template),pickerColor=Color,sliderAlpha,sliderHue=colorpickerTemplate.find('colorpicker-hue'),sliderSaturation=colorpickerTemplate.find('colorpicker-saturation'),colorpickerPreview=colorpickerTemplate.find('colorpicker-preview'),pickerColorPointers=colorpickerTemplate.find('i');$compile(colorpickerTemplate)($scope);if(withInput){var pickerColorInput=colorpickerTemplate.find('input');pickerColorInput.on('mousedown',function(event){event.stopPropagation();}).on('keyup',function(event){var newColor=this.value;elem.val(newColor);if(ngModel){$scope.$apply(ngModel.$setViewValue(newColor));}
event.stopPropagation();event.preventDefault();});elem.on('keyup',function(){pickerColorInput.val(elem.val());});}
var bindMouseEvents=function(){$document.on('mousemove',mousemove);$document.on('mouseup',mouseup);};if(thisFormat==='rgba'){colorpickerTemplate.addClass('alpha');sliderAlpha=colorpickerTemplate.find('colorpicker-alpha');sliderAlpha.on('click',function(event){Slider.setAlpha(event,fixedPosition);mousemove(event);}).on('mousedown',function(event){Slider.setAlpha(event,fixedPosition);bindMouseEvents();}).on('mouseup',function(event){emitEvent('colorpicker-selected-alpha');});}
sliderHue.on('click',function(event){Slider.setHue(event,fixedPosition);mousemove(event);}).on('mousedown',function(event){Slider.setHue(event,fixedPosition);bindMouseEvents();}).on('mouseup',function(event){emitEvent('colorpicker-selected-hue');});sliderSaturation.on('click',function(event){Slider.setSaturation(event,fixedPosition);mousemove(event);if(angular.isDefined(attrs.colorpickerCloseOnSelect)){hideColorpickerTemplate();}}).on('mousedown',function(event){Slider.setSaturation(event,fixedPosition);bindMouseEvents();}).on('mouseup',function(event){emitEvent('colorpicker-selected-saturation');});if(fixedPosition){colorpickerTemplate.addClass('colorpicker-fixed-position');}
colorpickerTemplate.addClass('colorpicker-position-'+position);if(inline==='true'){colorpickerTemplate.addClass('colorpicker-inline');}
target.append(colorpickerTemplate);if(ngModel){ngModel.$render=function(){elem.val(ngModel.$viewValue);};$scope.$watch(attrs.ngModel,function(newVal){update();if(withInput){pickerColorInput.val(newVal);}});}
elem.on('$destroy',function(){colorpickerTemplate.remove();});var previewColor=function(){try{colorpickerPreview.css('backgroundColor',pickerColor[thisFormat]());}catch(e){colorpickerPreview.css('backgroundColor',pickerColor.toHex());}
sliderSaturation.css('backgroundColor',pickerColor.toHex(pickerColor.value.h,1,1,1));if(thisFormat==='rgba'){sliderAlpha.css.backgroundColor=pickerColor.toHex();}};var mousemove=function(event){var
left=Slider.getLeftPosition(event),top=Slider.getTopPosition(event),slider=Slider.getSlider();Slider.setKnob(top,left);if(slider.callLeft){pickerColor[slider.callLeft].call(pickerColor,left/100);}
if(slider.callTop){pickerColor[slider.callTop].call(pickerColor,top/100);}
previewColor();var newColor=pickerColor[thisFormat]();elem.val(newColor);if(ngModel){$scope.$apply(ngModel.$setViewValue(newColor));}
if(withInput){pickerColorInput.val(newColor);}
return false;};var mouseup=function(){emitEvent('colorpicker-selected');$document.off('mousemove',mousemove);$document.off('mouseup',mouseup);};var update=function(){pickerColor.setColor(elem.val());pickerColorPointers.eq(0).css({left:pickerColor.value.s*100+'px',top:100-pickerColor.value.b*100+'px'});pickerColorPointers.eq(1).css('top',100*(1-pickerColor.value.h)+'px');pickerColorPointers.eq(2).css('top',100*(1-pickerColor.value.a)+'px');previewColor();};var getColorpickerTemplatePosition=function(){var
positionValue,positionOffset=Helper.getOffset(elem[0]);if(angular.isDefined(attrs.colorpickerParent)){positionOffset.left=0;positionOffset.top=0;}
if(position==='top'){positionValue={'top':positionOffset.top-147,'left':positionOffset.left};}else if(position==='right'){positionValue={'top':positionOffset.top,'left':positionOffset.left+126};}else if(position==='bottom'){positionValue={'top':positionOffset.top+elem[0].offsetHeight+2,'left':positionOffset.left};}else if(position==='left'){positionValue={'top':positionOffset.top,'left':positionOffset.left-150};}
return{'top':positionValue.top+'px','left':positionValue.left+'px'};};var documentMousedownHandler=function(){hideColorpickerTemplate();};var showColorpickerTemplate=function(){if(!colorpickerTemplate.hasClass('colorpicker-visible')){update();colorpickerTemplate.addClass('colorpicker-visible').css(getColorpickerTemplatePosition());emitEvent('colorpicker-shown');if(inline===false){$document.on('mousedown',documentMousedownHandler);}
if(attrs.colorpickerIsOpen){$scope[attrs.colorpickerIsOpen]=true;if(!$scope.$$phase){$scope.$digest();}}}};if(inline===false){elem.on('click',showColorpickerTemplate);}else{showColorpickerTemplate();}
colorpickerTemplate.on('mousedown',function(event){event.stopPropagation();event.preventDefault();});var emitEvent=function(name){if(ngModel){$scope.$emit(name,{name:attrs.ngModel,value:ngModel.$modelValue});}};var hideColorpickerTemplate=function(){if(colorpickerTemplate.hasClass('colorpicker-visible')){colorpickerTemplate.removeClass('colorpicker-visible');emitEvent('colorpicker-closed');$document.off('mousedown',documentMousedownHandler);if(attrs.colorpickerIsOpen){$scope[attrs.colorpickerIsOpen]=false;if(!$scope.$$phase){$scope.$digest();}}}};colorpickerTemplate.find('button').on('click',function(){hideColorpickerTemplate();});if(attrs.colorpickerIsOpen){$scope.$watch(attrs.colorpickerIsOpen,function(shouldBeOpen){if(shouldBeOpen===true){showColorpickerTemplate();}else if(shouldBeOpen===false){hideColorpickerTemplate();}});}}};}]);app.directive('pfqWysiwyg',['$timeout','wysiwgGui','$compile','$modal',function($timeout,wysiwgGui,$compile,$modal){return{template:'<div>'+'<style>'+'   .wysiwyg-textarea[contentEditable="false"] { background-color:#eee}'+'   .wysiwyg-btn-group-margin { margin-right:5px; }'+'   .wysiwyg-select { height:30px;margin-bottom:1px;}'+'   .wysiwyg-colorpicker { font-family: arial, sans-serif !important;font-size:16px !important; padding:2px 10px !important;}'+'</style>'+'<div class="wysiwyg-menu"></div>'+'<div id="{{textareaId}}"  ng-show="!showHtml" ng-attr-style="resize:vertical;height:{{textareaHeight || \'80px\'}}; overflow:auto" contentEditable="{{!disabled}}" class="{{textareaClass}} wysiwyg-textarea" rows="{{textareaRows}}" name="{{textareaName}}" required="{{textareaRequired}}" placeholder="{{textareaPlaceholder}}" ng-model="modelText"></div>'+'<div id="{{textareaId}}_code"  ng-show="showHtml" class="editor"  ui-ace="codeparam"  ng-model="modelText" style="height:{{textareaHeight || \'80px\'}};"  ></div>'+'<vertical-resizer ng-show="showHtml" target-min-height="height:{{textareaHeight || \'80px\'}}" target-max-height="400px" target-selector="#{{textareaId}}_code"></vertical-resizer></div>'+'</div>',restrict:'E',scope:{value:'=ngModel',textareaHeight:'@textareaHeight',textareaName:'@textareaName',textareaClass:'@textareaClass',textareaRequired:'@textareaRequired',textareaId:'@textareaId',textareaMenu:'=textareaMenu',textareaCustomMenu:'=textareaCustomMenu',fn:'&',disabled:'=?disabled',showHtml:'=?showHtml'},controller:function($scope,base64){$scope.showHtml=angular.isDefined($scope.showHtml)?$scope.showHtml:false;if(angular.isUndefined($scope.value)){$scope.value='';}
$scope.modelText=base64.decode($scope.value);var ace=null;$scope.codeparam={theme:'chrome',mode:'html',onLoad:function(_ace){ace=_ace;ace.$blockScrolling=Infinity;ace.setOptions({enableBasicAutocompletion:true,enableSnippets:true,enableLiveAutocompletion:true});}};$scope.$watch("modelText",function(){$scope.value=base64.encode($scope.modelText);});},replace:true,link:link,transclude:true};function link(scope,element,attrs){var textarea=element.find('div.wysiwyg-textarea');textarea.html(scope.modelText);scope.isLink=false;scope.fontSizes=[{value:'1',size:'10px'},{value:'2',size:'13px'},{value:'3',size:'16px'},{value:'4',size:'18px'},{value:'5',size:'24px'},{value:'6',size:'32px'},{value:'7',size:'48px'}];scope.formatBlocks=[{name:'Heading Blocks',value:'div'},{name:'Heading 1',value:'h1'},{name:'Heading 2',value:'h2'},{name:'Heading 3',value:'h3'},{name:'Heading 4',value:'h4'},{name:'Heading 5',value:'h5'},{name:'Heading 6',value:'h6'}];scope.formatBlock=scope.formatBlocks[0];scope.fontSize=scope.fontSizes[1];if(angular.isArray(scope.cssClasses)){scope.cssClasses.unshift('css');scope.cssClass=scope.cssClasses[0];}
scope.fonts=['Georgia','Palatino Linotype','Times New Roman','Arial','Helvetica','Arial Black','Comic Sans MS','Impact','Lucida Sans Unicode','Tahoma','Trebuchet MS','Verdana','Courier New','Lucida Console','Helvetica Neue'].sort();scope.font=scope.fonts[6];init();function init(){compileMenu();configureDisabledWatch();configureBootstrapTitle();configureListeners();}
scope.changeModel=function(){textarea.html(scope.modelText);}
function compileMenu(){wysiwgGui.setCustomElements(scope.textareaCustomMenu);var menuDiv=element.children('div.wysiwyg-menu')[0];menuDiv.appendChild(wysiwgGui.createMenu(scope.textareaMenu));$compile(menuDiv)(scope);}
function configureDisabledWatch(){scope.$watch('disabled',function(newValue){angular.element('div.wysiwyg-menu').find('button').each(function(){angular.element(this).attr('disabled',newValue);});angular.element('div.wysiwyg-menu').find('select').each(function(){angular.element(this).attr('disabled',newValue);});});}
function configureBootstrapTitle(){if(attrs.enableBootstrapTitle==='true'&&attrs.enableBootstrapTitle!==undefined){element.find('button[title]').tooltip({container:'body'});}}
function insertTab(html,position){var begining=html.substr(0,position);var end=html.substr(position);return begining+'<span style="white-space:pre">    </span>'+end;}
function configureListeners(){angular.element('.wysiwyg-menu').find('button').on('click',function(){var title=angular.element(this);scope.$emit('wysiwyg.click',title.attr('title')||title.attr('data-original-title'));});textarea.on('input keyup paste mouseup',function(){var html=textarea.html();if(html=='<br>'){html='';}
scope.modelText=html;});textarea.on('keydown',function(event){if(event.keyCode==9){var TAB_SPACES=4;var html=textarea.html();var selection=window.getSelection();var position=selection.anchorOffset;event.preventDefault();}});textarea.on('click keyup focus mouseup',function(){$timeout(function(){scope.isBold=scope.cmdState('bold');scope.isUnderlined=scope.cmdState('underline');scope.isStrikethrough=scope.cmdState('strikethrough');scope.isItalic=scope.cmdState('italic');scope.isSuperscript=itemIs('SUP');scope.isSubscript=itemIs('SUB');scope.isRightJustified=scope.cmdState('justifyright');scope.isLeftJustified=scope.cmdState('justifyleft');scope.isCenterJustified=scope.cmdState('justifycenter');scope.isPre=scope.cmdValue('formatblock')==='pre';scope.isBlockquote=scope.cmdValue('formatblock')==='blockquote';scope.isOrderedList=scope.cmdState('insertorderedlist');scope.isUnorderedList=scope.cmdState('insertunorderedlist');scope.fonts.forEach(function(v,k){if(scope.cmdValue('fontname').indexOf(v)>-1){scope.font=v;return false;}});scope.cmdValue('formatblock').toLowerCase();scope.formatBlocks.forEach(function(v,k){if(scope.cmdValue('formatblock').toLowerCase()===v.value.toLowerCase()){scope.formatBlock=v;return false;}});scope.fontSizes.forEach(function(v,k){if(scope.cmdValue('fontsize')===v.value){scope.fontSize=v;return false;}});scope.hiliteColor=getHiliteColor();element.find('button.wysiwyg-hiliteColor').css('background-color',scope.hiliteColor);scope.fontColor=scope.cmdValue('forecolor');element.find('button.wysiwyg-fontcolor').css('color',scope.fontColor);scope.isLink=itemIs('A');},0);});}
function itemIs(tag){var selection=window.getSelection().getRangeAt(0);if(selection){if(selection.startContainer.parentNode.tagName===tag.toUpperCase()||selection.endContainer.parentNode.tagName===tag.toUpperCase()){return true;}else{return false;}}else{return false;}}
function getHiliteColor(){var selection=window.getSelection().getRangeAt(0);if(selection){var style=angular.element(selection.startContainer.parentNode).attr('style');if(!angular.isDefined(style))
return false;var a=style.split(';');for(var i=0;i<a.length;i++){var s=a[i].split(':');if(s[0]==='background-color')
return s[1];}
return'#fff';}else{return'#fff';}}
scope.format=function(cmd,arg,atype){if(atype===false||atype===undefined){console.log('test 555');document.execCommand(cmd,false,arg);}else{console.log('test');}};scope.cmdState=function(cmd){return document.queryCommandState(cmd);};scope.cmdValue=function(cmd){return document.queryCommandValue(cmd);};scope.createLink=function(){var input=prompt('Enter the link URL');if(input&&input!==undefined)
scope.format('createlink',input);};scope.insertImage=function(){var imageModal=$modal({scope:scope,template:'/pfq-wysiwyg/image-modal.html',placement:'center',backdrop:false,show:false,keyboard:false,title:'Chose Image',animation:'am-fade'});console.log(imageModal);imageModal.show();};scope.showHmlCode=function(){scope.showHtml=scope.showHtml?false:true;if(scope.showHtml==false){textarea.html(scope.modelText);}};scope.showShortText=function(){console.log('showShortText');};scope.setFont=function(){scope.format('fontname',scope.font);};scope.setFontSize=function(){scope.format('fontsize',scope.fontSize.value);};scope.setFormatBlock=function(){scope.format('formatBlock',scope.formatBlock.value);};scope.setFontColor=function(){scope.format('forecolor',scope.fontColor);};scope.setHiliteColor=function(){scope.format('hiliteColor',scope.hiliteColor);};scope.format('enableobjectresizing',true);scope.format('styleWithCSS',true);}}]).factory('wysiwgGui',['wysiwgGuiElements',function(wysiwgGuiElements){var ELEMENTS=wysiwgGuiElements;var custom={};var setCustomElements=function(el){custom=el;};var getMenuGroup=function(){return{tag:'div',classes:'btn-group btn-group-sm wysiwyg-btn-group-margin'};};var getMenuItem=function(item){return ELEMENTS[item]||{};};var createMenu=function(menu){angular.extend(ELEMENTS,custom);if(angular.isDefined(menu)&&menu!=='')
menu=menu;else
menu=DEFAULT_MENU;var startDiv=document.createElement('div');for(var i=0;i<menu.length;i++){var menuGroup=create(getMenuGroup());for(var j=0;j<menu[i].length;j++){if(menu[i][j]==='link'){var el=create(getMenuItem('unlink'));menuGroup.appendChild(el);}
var el=create(getMenuItem(menu[i][j]));menuGroup.appendChild(el);}
startDiv.appendChild(menuGroup);}
return startDiv;};function create(obj){var el;if(obj.tag){el=document.createElement(obj.tag);}else if(obj.text){el=document.createElement('span');}else{el=document.createElement('span');return el;}
if(obj.text){el.innerText=obj.text;}
if(obj.classes){el.className=obj.classes;}
if(obj.html){el.innerHTML=obj.html;}
if(obj.attributes&&obj.attributes.length){for(var i in obj.attributes){var attr=obj.attributes[i];if(attr.name&&attr.value){el.setAttribute(attr.name,attr.value);}}}
if(obj.data&&obj.data.length){for(var item in obj.data){el.appendChild(create(obj.data[item]));}}
return el;}
var stringToArray=function(string){var ret;try{ret=JSON.parse(string.replace(/'/g,'"'));}catch(e){}
return ret;};return{createMenu:createMenu,setCustomElements:setCustomElements};}]).value('wysiwgGuiElements',{'bold':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Bold'},{name:'ng-click',value:'format(\'bold\')'},{name:'ng-class',value:'{ active: isBold }'}],data:[{tag:'i',classes:'fa fa-bold'}]},'italic':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Italic'},{name:'ng-click',value:'format(\'italic\')'},{name:'ng-class',value:'{ active: isItalic }'}],data:[{tag:'i',classes:'fa fa-italic'}]},'underline':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Underline'},{name:'ng-click',value:'format(\'underline\')'},{name:'ng-class',value:'{ active: isUnderlined }'}],data:[{tag:'i',classes:'fa fa-underline'}]},'strikethrough':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Strikethrough'},{name:'ng-click',value:'format(\'strikethrough\')'},{name:'ng-class',value:'{ active: isStrikethrough }'}],data:[{tag:'i',classes:'fa fa-strikethrough'}]},'subscript':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Subscript'},{name:'ng-click',value:'format(\'subscript\')'},{name:'ng-class',value:'{ active: isSubscript }'}],data:[{tag:'i',classes:'fa fa-subscript'}]},'superscript':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Superscript'},{name:'ng-click',value:'format(\'superscript\')'},{name:'ng-class',value:'{ active: isSuperscript }'}],data:[{tag:'i',classes:'fa fa-superscript'}]},'remove-format':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Remove Formatting'},{name:'ng-click',value:'format(\'removeFormat\')'}],data:[{tag:'i',classes:'fa fa-eraser'}]},'ordered-list':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Ordered List'},{name:'ng-click',value:'format(\'insertorderedlist\')'},{name:'ng-class',value:'{ active: isOrderedList }'}],data:[{tag:'i',classes:'fa fa-list-ol'}]},'unordered-list':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Unordered List'},{name:'ng-click',value:'format(\'insertunorderedlist\')'},{name:'ng-class',value:'{ active: isUnorderedList }'}],data:[{tag:'i',classes:'fa fa-list-ul'}]},'outdent':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Outdent'},{name:'ng-click',value:'format(\'outdent\')'}],data:[{tag:'i',classes:'fa fa-outdent'}]},'indent':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Indent'},{name:'ng-click',value:'format(\'indent\')'}],data:[{tag:'i',classes:'fa fa-indent'}]},'left-justify':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Left Justify'},{name:'ng-click',value:'format(\'justifyleft\')'},{name:'ng-class',value:'{ active: isLeftJustified }'}],data:[{tag:'i',classes:'fa fa-align-left'}]},'center-justify':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Center Justify'},{name:'ng-click',value:'format(\'justifycenter\')'},{name:'ng-class',value:'{ active: isCenterJustified }'}],data:[{tag:'i',classes:'fa fa-align-center'}]},'right-justify':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Right Justify'},{name:'ng-click',value:'format(\'justifyright\')'},{name:'ng-class',value:'{ active: isRightJustified }'}],data:[{tag:'i',classes:'fa fa-align-right'}]},'code':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Code'},{name:'ng-click',value:'format(\'formatblock\', \'pre\')'},{name:'ng-class',value:'{ active: isPre }'}],data:[{tag:'i',classes:'fa fa-code'}]},'quote':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Quote'},{name:'ng-click',value:'format(\'formatblock\', \'blockquote\')'},{name:'ng-class',value:'{ active: isBlockquote }'}],data:[{tag:'i',classes:'fa fa-quote-right'}]},'paragraph':{tag:'button',classes:'btn btn-wysiwyg-menu ',text:'P',attributes:[{name:'title',value:'Paragragh'},{name:'ng-click',value:'format(\'insertParagraph\')'},{name:'ng-class',value:'{ active: isParagraph }'}]},'image':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Image'},{name:'ng-click',value:'insertImage()'}],data:[{tag:'i',classes:'fa fa-picture-o'}]},'htmlcode':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'htmlcode',value:'Code'},{name:'ng-click',value:'showHmlCode()'}],data:[{tag:'i',classes:'fa fa-file-code-o'}]},'shorttext':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'shorttext',value:'Short Text'},{name:'ng-click',value:'showShortText()'}],data:[{tag:'i',classes:'fa fa-qrcode'}]},'font-color':{tag:'button',classes:'btn btn-wysiwyg-menu  wysiwyg-colorpicker wysiwyg-fontcolor',text:'A',attributes:[{name:'title',value:'Font Color'},{name:'colorpicker',value:'rgba'},{name:'colorpicker-position',value:'top'},{name:'ng-model',value:'fontColor'},{name:'ng-change',value:'setFontColor()'}]},'hilite-color':{tag:'button',classes:'btn btn-wysiwyg-menu  wysiwyg-colorpicker wysiwyg-fontcolor',text:'H',attributes:[{name:'title',value:'Hilite Color'},{name:'colorpicker',value:'rgba'},{name:'colorpicker-position',value:'top'},{name:'ng-model',value:'hiliteColor'},{name:'ng-change',value:'setHiliteColor()'}]},'font':{tag:'select',classes:'form-control wysiwyg-select',attributes:[{name:'title',value:'Image'},{name:'ng-model',value:'font'},{name:'ng-options',value:'f for f in fonts'},{name:'ng-change',value:'setFont()'}]},'font-size':{tag:'select',classes:'form-control wysiwyg-select',attributes:[{name:'title',value:'Image'},{name:'ng-model',value:'fontSize'},{name:'ng-options',value:'f.size for f in fontSizes'},{name:'ng-change',value:'setFontSize()'}]},'format-block':{tag:'select',classes:'form-control wysiwyg-select',attributes:[{name:'title',value:'Format Block'},{name:'ng-model',value:'formatBlock'},{name:'ng-options',value:'f.name for f in formatBlocks'},{name:'ng-change',value:'setFormatBlock()'}]},'link':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Link'},{name:'ng-click',value:'createLink()'},{name:'ng-show',value:'!isLink'}],data:[{tag:'i',classes:'fa fa-link'}]},'unlink':{tag:'button',classes:'btn btn-wysiwyg-menu ',attributes:[{name:'title',value:'Unlink'},{name:'ng-click',value:'format(\'unlink\')'},{name:'ng-show',value:'isLink'}],data:[{tag:'i',classes:'fa fa-unlink'}]}});}(angular));